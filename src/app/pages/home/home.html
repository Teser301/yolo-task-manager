<div class="task-manager">
    <div class="task-header">
        <h2 class="title">Task Manager</h2>
        <div class="creation-container">
            <button class="btn-primary" (click)="onCreateCategory()">Create Category</button>
            @if (categories.length > 0) {
            <button class="btn-primary" (click)="onCreateTask()">Create Task</button>
            }
        </div>
    </div>
    <div>
        <app-search (searchChanged)="onSearch($event)" searchMode="category" />
    </div>
    <div class="category-list">
        @defer (when filteredCategories.length > 0) {
        <div class="category-list">
            @for (category of filteredCategories; track category.id) {
            <app-category-card [category]="category" (categoryDeleted)="handleCategoryDeleted($event)"
                (edit)="handleCategoryEdit($event)" (taskDeleted)="handleTaskDeleted($event)" />
            }
        </div>
        } @placeholder {
        <div class="skeleton-list">
            @for (i of [1,2,3]; track i) {
            <div class="skeleton-card"></div>
            }
        </div>
        }
    </div>
</div>