<div class="task-manager">
    <div class="task-header">
        <h2 class="title">Task Manager</h2>
        <div class="creation-container">
            <button class="btn-primary" (click)="onCreateCategory()">Create Category</button>
            @if (categories.length > 0) {
            <button class="btn-primary" (click)="onCreateTask()">Create Task</button>
            }
        </div>
    </div>
    <div>
        <app-search (searchChanged)="onSearch($event)" searchMode="category" />
    </div>
    <div class="category-list">
        @if (loading) {
        <div class="loading-message">Loading categories...</div>
        } @else {
        @if (filteredCategories.length > 0) {
        <div class="category-list">
            @for (category of filteredCategories; track category.id) {
            <app-category-card [category]="category" (categoryDeleted)="handleCategoryDeleted($event)"
                (edit)="handleCategoryEdit($event)" (taskDeleted)="handleTaskDeleted($event)" />
            }
        </div>
        } @else {
        <div class="empty-message">
            No categories found. Create your first category to get started!
        </div>
        }
        }
    </div>
</div>