<div>
    <div class="form-header">
        <h2 class="form-title">
            {{ modalService.modalType === 'add' ? 'Add New Category' : 'Edit Category' }}
        </h2>
        <button class="btn-danger" (click)="modalService.closeModal()">
            <app-icon type="cancel" />
        </button>
    </div>

    <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()" class="form-container">
        <div class="form-group">
            <label [for]="modalService.modalType + '-title'" class="form-label">Title*</label>
            <input [id]="modalService.modalType + '-title'" formControlName="title" placeholder="Title"
                class="form-input" autocomplete="off" />

            @if (categoryForm.get('title')?.touched && categoryForm.get('title')?.errors?.['required']) {
            <div class="error">
                <small>Title is required.</small>
            </div>
            }
        </div>
        <div class="form-group">
            <label [for]="modalService.modalType + '-description'" class="form-label">Description*</label>
            <textarea rows="10" cols="50" [id]="modalService.modalType + '-description'" formControlName="description"
                placeholder="Add description" class="form-textarea" autocomplete="off"></textarea>
            @if (categoryForm.get('description')?.touched && categoryForm.get('description')?.errors?.['required']) {
            <div class="error">
                <small>Description is required.</small>
            </div>
            }

        </div>
        @if (errorMessage) {
        <div class="error">
            {{ errorMessage }}
        </div>
        }
        <div class="form-actions">
            <button class="btn-primary" type="submit" [disabled]="isSubmitting">
                <app-icon type="edit" />
                {{ modalService.modalType === 'add' ? 'Create' : 'Save Changes' }}
            </button>
        </div>
    </form>
</div>